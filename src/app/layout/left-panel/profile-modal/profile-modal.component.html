<p-dialog header="Editar Perfil" [modal]="true" [(visible)]="visible" [width]="800" (onHide)="closeModal()" [contentStyle]="getContentStyle()">
  <form [formGroup]="profileForm" class="ui-fluid" (submit)="onSubmit(profileForm.valid, profileForm.value)">
    <div class="ui-g profile-image-g">
      <div class="profile-image">
        <uns-spinner [isLoading]="isUpdatingPicture"></uns-spinner>
        <p-fileUpload name="foto" [url]="imageUploadUrl" accept="image/*" mode="basic" auto="auto" [maxFileSize]="maxFileSize" (onSelect)="onSelectFile($event)" (onBeforeUpload)="onBeforeUpload($event)" (onUpload)="onUpload($event)" (onError)="onUploadError($event)"></p-fileUpload>
        <div class="profile-image-overlay">
          <span>Alterar foto</span>
        </div>
      </div>
    </div>
    <div class="ui-g">
      <div class="ui-g-12">
        <label class="form-label">Nome Completo</label>
        <input formControlName="nome" type="text" pInputText>
        <small class="validation-error-message" [hidden]="profileForm.controls.nome.pristine || profileForm.controls.nome.valid">
          O nome é obrigatório.
        </small>
      </div>
    </div>
    <div class="ui-g">
      <div class="ui-g-6">
        <label class="form-label">Data de Nascimento</label>
        <p-calendar default-config formControlName="dataNascimento" [monthNavigator]="true" [yearNavigator]="true" [yearRange]="calendarYearRange" [maxDate]="today"></p-calendar>
        <small class="validation-error-message" [hidden]="profileForm.controls.dataNascimento.pristine || profileForm.controls.dataNascimento.valid">
          A data de nascimento é obrigatória.
        </small>
      </div>
      <div class="ui-g-6">
        <label class="form-label">Sexo</label>
        <p-radioButton class="ui-g-4" name="sexo" value="Masculino" label="Masculino" formControlName="sexo"></p-radioButton>
        <p-radioButton class="ui-g-4" name="sexo" value="Feminino" label="Feminino" formControlName="sexo"></p-radioButton>
        <p-radioButton class="ui-g-4" name="sexo" value="Outro" label="Outro" formControlName="sexo"></p-radioButton>
        <small class="validation-error-message" [hidden]="profileForm.controls.sexo.pristine || profileForm.controls.sexo.valid">
          O sexo é obrigatório.
        </small>
      </div>
    </div>
    <div class="ui-g">
      <div class="ui-g-6">
        <label class="form-label">Estado Civil</label>
        <p-dropdown [options]="maritalStatuses" [autoWidth]="false" formControlName="estadoCivil"></p-dropdown>
        <small class="validation-error-message" [hidden]="profileForm.controls.estadoCivil.pristine || profileForm.controls.estadoCivil.valid">
          O estado civil é obrigatório.
        </small>
      </div>
      <div class="ui-g-6">
        <label class="form-label">Número Funcional</label>
        <p-inputMask mask="999999" formControlName="numeroFuncional"></p-inputMask>
        <small class="validation-error-message" [hidden]="profileForm.controls.numeroFuncional.pristine || profileForm.controls.numeroFuncional.valid">
          O número funcional é obrigatório.
        </small>
      </div>
    </div>
    <div class="ui-g">
      <div class="ui-g-6">
        <label class="form-label">Nacionalidade</label>
        <p-dropdown [options]="nationalities" [autoWidth]="false" formControlName="nacionalidade"></p-dropdown>
        <small class="validation-error-message" [hidden]="profileForm.controls.nacionalidade.pristine || profileForm.controls.nacionalidade.valid">
          A nacionalidade é obrigatória.
        </small>
      </div>
      <div class="ui-g-6">
        <div class="ui-g-4 no-vertical-padding">
          <label class="form-label">Estado</label>
          <p-dropdown [options]="states" [autoWidth]="false" formControlName="estado"></p-dropdown>
          <small class="validation-error-message" [hidden]="profileForm.controls.estado.pristine || profileForm.controls.estado.valid">
            O estado é obrigatório.
          </small>
        </div>
        <div class="ui-g-8 no-vertical-padding">
          <label class="form-label">Cidade</label>
          <input formControlName="cidade" type="text" pInputText>
          <small class="validation-error-message" [hidden]="profileForm.controls.cidade.pristine || profileForm.controls.cidade.valid">
            A cidade é obrigatória.
          </small>
        </div>
      </div>
    </div>
    <div class="ui-g">
      <div class="ui-g-12">
        <uns-spinner [isLoading]="isSubmitting"></uns-spinner>
        <button *ngIf="!isSubmitting" pButton type="submit" label="Salvar" [disabled]="!profileForm.valid"></button>
      </div>
    </div>
  </form>
</p-dialog>
